{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelDynamic as _vModelDynamic, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"row align-items-center justify-content-center\"\n};\nconst _hoisted_3 = {\n  class: \"col-12 col-sm-6 col-md-4 col-lg-4\"\n};\nconst _hoisted_4 = {\n  class: \"card mx-auto shadow\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  \"close-icon\": \"mdi-close-circle\",\n  value: true,\n  class: \"alert alert-danger\",\n  role: \"alert\",\n  dense: \"\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  \"close-icon\": \"mdi-close-circle\",\n  value: true,\n  class: \"alert alert-danger\",\n  role: \"alert\",\n  dense: \"\"\n};\nconst _hoisted_8 = {\n  class: \"card-text pt-2\"\n};\nconst _hoisted_9 = {\n  class: \"col-md-10 mb-3\"\n};\nconst _hoisted_10 = {\n  class: \"input-group\"\n};\nconst _hoisted_11 = [\"rules\"];\nconst _hoisted_12 = [\"type\", \"rules\", \"append-icon\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n    class: \"card-title\"\n  }, [_createElementVNode(\"span\", null, \"Login\")], -1 /* HOISTED */)), _ctx.showMsg === 'error' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \" Invalid username or password. Please Try again. \")) : _createCommentVNode(\"v-if\", true), _ctx.showMsg === 'axiosError' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" Access blocked by server. Check server. \")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"input-group-prepend\"\n  }, [_createElementVNode(\"span\", {\n    class: \"input-group-text\"\n  }, \"@\")], -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.credentials.username = $event),\n    counter: 70,\n    label: \"Username\",\n    rules: _ctx.rules.username,\n    maxlength: \"70\",\n    required: \"\",\n    type: \"text\",\n    class: \"form-control mb-3\",\n    placeholder: \"Username\",\n    \"aria-describedby\": \"inputGroupPrepend2\"\n  }, null, 8 /* PROPS */, _hoisted_11), [[_vModelText, _ctx.credentials.username]]), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"w-100\"\n  }, null, -1 /* HOISTED */)), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"input-group-prepend\"\n  }, [_createElementVNode(\"span\", {\n    class: \"input-group-text\"\n  }, \"***\")], -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: _ctx.showPassword ? 'text' : 'Password',\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.credentials.password = $event),\n    label: \"Password\",\n    rules: _ctx.rules.password,\n    maxlength: \"20\",\n    required: \"\",\n    \"append-icon\": _ctx.showPassword ? 'mdi-eye' : 'mdi-eye-off',\n    \"onClick:append\": _cache[2] || (_cache[2] = $event => _ctx.showPassword = !_ctx.showPassword),\n    class: \"form-control\",\n    placeholder: \"Password\",\n    \"aria-describedby\": \"inputGroupPrepend2\"\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_12), [[_vModelDynamic, _ctx.credentials.password]])])]), _createElementVNode(\"button\", {\n    ref: \"form\",\n    onClick: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.login && $options.login(...args), [\"prevent\"])),\n    class: \"btn btn-primary\"\n  }, \"Login\", 512 /* NEED_PATCH */)])])])])])]);\n}","map":{"version":3,"names":["class","key","value","role","dense","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_ctx","showMsg","_hoisted_6","_createCommentVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_cache","$event","credentials","username","counter","label","rules","maxlength","required","type","placeholder","_hoisted_11","showPassword","password","_hoisted_12","ref","onClick","_withModifiers","args","$options","login"],"sources":["/Users/tomatosauce/Documents/Movie_App/assign2-movies-part2-frontend-jaketamayo/movie-fe/src/components/Auth.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"row align-items-center justify-content-center\">\n            <div class=\"col-12 col-sm-6 col-md-4 col-lg-4\">\n                <div class=\"card mx-auto shadow\">\n                    <div class=\"card-body\">\n                        <div class=\"card-title\"><span>Login</span></div>\n                        <div v-if=\"showMsg === 'error'\" close-icon=\"mdi-close-circle\" :value=\"true\"\n                            class=\"alert alert-danger\" role=\"alert\" dense>\n                            Invalid username or password. Please Try again.\n                        </div>\n                        <div v-if=\"showMsg === 'axiosError'\" close-icon=\"mdi-close-circle\" :value=\"true\"\n                            class=\"alert alert-danger\" role=\"alert\" dense>\n                            Access blocked by server. Check server.\n                        </div>\n                        <div class=\"card-text pt-2\">\n                            <div class=\"col-md-10 mb-3\">\n                                <div class=\"input-group\">\n                                    <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text\">@</span>\n                                    </div>\n                                    <input v-model=\"credentials.username\" :counter=\"70\" label=\"Username\"\n                                        :rules=\"rules.username\" maxlength=\"70\" required type=\"text\"\n                                        class=\"form-control mb-3\" placeholder=\"Username\"\n                                        aria-describedby=\"inputGroupPrepend2\" />\n                                    <div class=\"w-100\"></div>\n                                    <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text\">***</span>\n                                    </div>\n                                    <input :type=\"showPassword ? 'text' : 'Password'\" v-model=\"credentials.password\"\n                                        label=\"Password\" :rules=\"rules.password\" maxlength=\"20\" required\n                                        :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\n                                        @click:append=\"showPassword = !showPassword\" class=\"form-control\"\n                                        placeholder=\"Password\" aria-describedby=\"inputGroupPrepend2\" />\n                                </div>\n                            </div>\n                            <button ref=\"form\" @click.prevent=\"login\" class=\"btn btn-primary\">Login</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport router from '../router';\nimport { APIService } from \"../http/APIService\";\nconst apiService = new APIService();\n\nexport default {\n    name: \"Auth\",\n    data: () => ({\n        credentials: {},\n        valid: true,\n        showMsg: \"\",\n        loading: false,\n        rules: {\n            username: [\n                (v) => !!v || \"Username is required\",\n                (v) =>\n                    (v && v.length > 3) ||\n                    \"A username must be more than 3 characters long\",\n                (v) =>\n                    /^[a-z0-9_]+$/.test(v) ||\n                    \"A username can only contain letters and digits\",\n            ],\n            password: [\n                (v) => !!v || \"Password is required\",\n                (v) =>\n                    (v && v.length > 7) ||\n                    \"The password must be longer than 7 characters\",\n            ],\n        },\n        showPassword: false,\n    }),\n    methods: {\n        login() {\n            localStorage.removeItem(\"access\")\n            localStorage.removeItem(\"refresh\")\n            localStorage.removeItem(\"log_user\")\n            localStorage.removeItem(\"isAuthenticated\")\n            localStorage.setItem(\"isAuthenticated\", false)\n\n            apiService\n                .authenticateLogin(this.credentials)\n                .then((response) => {\n\n                    const access = response.data.access\n                    const refresh = response.data.refresh\n\n                    localStorage.setItem(\"access\", access)\n                    localStorage.setItem(\"refresh\", refresh)\n                    localStorage.setItem(\"isAuthenticated\", true)\n                    localStorage.setItem(\"log_user\", JSON.stringify(this.credentials.username))\n\n                    window.location = \"/\";\n                }).catch(error => {\n                    if (error.name === \"AxiosError\") { // Verify CORS middleware installed in server settings\n                        this.showMsg = \"axiosError\"\n                    } else if (error.response.status === 401) { // \"not authorized\"\n                        router.push(\"/auth\");\n                    } else if (error.response.status === 400) { //\"bad request\"\n                        this.showMsg = \"requestError\";\n                    } else {\n                        this.showMsg = \"error\";\n                        router.push(\"/auth\");\n                    }\n                });\n        }\n    }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}